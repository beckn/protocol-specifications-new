{
  "@context": {
    "@version": 1.1,
    "@vocab": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/p2p-trading/schema/EnergyEnrollment/v0.2/#",
    "beckn": "../vocab.jsonld",
    "did": "https://www.w3.org/ns/did/v1#",
    "schema": "https://schema.org/",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
    "owl": "http://www.w3.org/2002/07/owl#",
    "vc": "https://www.w3.org/2018/credentials#",
    
    "EnergyEnrollment": {
      "@id": "EnergyEnrollment",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "schema:ProgramMembership" },
      "rdfs:comment": "Program enrollment/subscription. Extends schema:ProgramMembership for energy-specific enrollment flows. Reusable pattern for any subscription-based service (telecom, utilities, memberships)."
    },
    
    "VerifiableCredential": {
      "@id": "vc:VerifiableCredential",
      "@type": "@id",
      "rdfs:comment": "A W3C Verifiable Credential (https://www.w3.org/TR/vc-data-model-2.0/) used in enrollment. This is a wrapper/reference object that contains the credential data (as JWT or JSON-LD), metadata, and URLs. The actual credential follows W3C VC Data Model v2.0 structure."
    },
    
    "CredentialVerification": {
      "@id": "CredentialVerification",
      "@type": "@id",
      "rdfs:comment": "Results of credential verification performed by BPP. Contains status and list of verified credentials."
    },
    
    "ConflictCheck": {
      "@id": "ConflictCheck",
      "@type": "@id",
      "rdfs:comment": "Results of conflict checking with existing enrollments. Indicates if conflicts exist and provides details of conflicting enrollments."
    },
    
    "ConflictingEnrollment": {
      "@id": "ConflictingEnrollment",
      "@type": "@id",
      "rdfs:comment": "Details of a conflicting enrollment that prevents the requested enrollment from proceeding."
    },
    
    "VerifiedCredential": {
      "@id": "VerifiedCredential",
      "@type": "@id",
      "rdfs:comment": "Details of a credential that has been verified by the BPP, including verification timestamp."
    },
    
    "ConsentRevocation": {
      "@id": "ConsentRevocation",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "schema:CancelAction" },
      "rdfs:comment": "Consent revocation. Extends schema:CancelAction for revoking consent/permissions."
    },
    
    "Unenrollment": {
      "@id": "Unenrollment",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "schema:LeaveAction" },
      "rdfs:comment": "Unenrollment/unsubscription. Extends schema:LeaveAction for leaving a program/membership."
    },
    
    "Customer": {
      "@id": "beckn:Customer",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "schema:Person" },
      "rdfs:comment": "Customer/subscriber entity. Extends schema:Person. Represents the user being enrolled in a program. Can also be schema:Organization for business subscriptions."
    },
    
    "Instrument": {
      "@id": "beckn:Instrument",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "schema:ItemList" },
      "rdfs:comment": "Collection of assets (meters, DERs) associated with an enrollment. Extends schema:ItemList as a container for enrollable items."
    },
    
    "Meter": {
      "@id": "beckn:Meter",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "schema:Product" },
      "rdfs:comment": "Electricity meter entity. Extends schema:Product. Represents a physical meter tracking consumption, generation, or net flow."
    },
    
    "DER": {
      "@id": "beckn:DER",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "schema:Product" },
      "rdfs:comment": "Distributed Energy Resource. Extends schema:Product. Represents a distributed asset such as solar PV, EV, home batteries, V2G, or smart loads."
    },
    
    "enrollmentId": {
      "@id": "enrollmentId",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:membershipNumber" },
      "rdfs:comment": "Unique identifier for the enrollment/subscription. Equivalent to schema:membershipNumber."
    },
    
    "programId": {
      "@id": "programId",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:programName" },
      "rdfs:comment": "Identifier/name of the program. Equivalent to schema:programName."
    },
    
    "status": {
      "@id": "status",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:reservationStatus" },
      "rdfs:comment": "Enrollment status. Equivalent to schema:reservationStatus. Values: ACTIVE (Confirmed), PENDING (Pending), CANCELLED (Cancelled), SUSPENDED (Hold)."
    },
    
    "startDate": {
      "@id": "startDate",
      "@type": "xsd:dateTime",
      "owl:equivalentProperty": { "@id": "schema:validFrom" },
      "rdfs:comment": "When enrollment becomes active. Equivalent to schema:validFrom."
    },
    
    "endDate": {
      "@id": "endDate",
      "@type": "xsd:dateTime",
      "owl:equivalentProperty": { "@id": "schema:validThrough" },
      "rdfs:comment": "When enrollment expires/ends. Equivalent to schema:validThrough."
    },
    
    "enrolledAt": {
      "@id": "enrolledAt",
      "@type": "xsd:dateTime",
      "owl:equivalentProperty": { "@id": "schema:dateCreated" },
      "rdfs:comment": "When enrollment was created/confirmed. Equivalent to schema:dateCreated."
    },
    
    "meters": {
      "@id": "meters",
      "@type": "@id",
      "@container": "@set",
      "rdfs:comment": "Array of MeterEnrollment objects specifying meters to enroll. Required in confirm request - order will only be confirmed if at least one meter is specified."
    },
    
    "ders": {
      "@id": "ders",
      "@type": "@id",
      "@container": "@set",
      "rdfs:comment": "Array of DER identifiers associated with the enrollment. Used in enrollment credentials."
    },
    
    "credential": {
      "@id": "credential",
      "@type": "@id",
      "rdfs:comment": "Enrollment credential object. Contains the signed Verifiable Credential proving enrollment."
    },
    
    "credentialId": {
      "@id": "credentialId",
      "@type": "xsd:string",
      "rdfs:comment": "Unique identifier for the credential. Used to reference credentials in verification and conflict checking."
    },
    
    "credentialData": {
      "@id": "credentialData",
      "@type": "xsd:string",
      "rdfs:comment": "The credential data itself, typically a JWT or JSON-LD string containing the W3C Verifiable Credential (https://www.w3.org/TR/vc-data-model-2.0/). When decoded, must conform to W3C VC Data Model v2.0 structure."
    },
    
    "credentialUrl": {
      "@id": "credentialUrl",
      "@type": "@id",
      "rdfs:comment": "URL where the credential can be accessed or retrieved. Used for enrollment credentials returned in on_confirm."
    },
    
    "verificationUrl": {
      "@id": "verificationUrl",
      "@type": "@id",
      "rdfs:comment": "URL for verifying the credential. Used for third-party verification of enrollment credentials."
    },
    
    "format": {
      "@id": "format",
      "@type": "xsd:string",
      "rdfs:comment": "Credential format as per W3C VC Data Model v2.0. Values: VC-JWT (JWT-encoded VC), VC-JSON-LD (JSON-LD encoded VC), or other W3C Verifiable Credential formats."
    },
    
    "issuedAt": {
      "@id": "vc:issuanceDate",
      "@type": "xsd:dateTime",
      "rdfs:comment": "Timestamp when the credential was issued (ISO 8601). Maps to W3C VC issuanceDate property."
    },
    
    "expiresAt": {
      "@id": "vc:expirationDate",
      "@type": "xsd:dateTime",
      "rdfs:comment": "Timestamp when the credential expires (ISO 8601). Maps to W3C VC expirationDate property. May be null for non-expiring credentials."
    },
    
    "credentialVerification": {
      "@id": "credentialVerification",
      "@type": "@id",
      "rdfs:comment": "Credential verification results object. Returned in on_init response after BPP verifies provided credentials."
    },
    
    "verifiedCredentials": {
      "@id": "verifiedCredentials",
      "@type": "@id",
      "@container": "@set",
      "rdfs:comment": "Array of VerifiedCredential objects representing credentials that were successfully verified."
    },
    
    "verifiedAt": {
      "@id": "verifiedAt",
      "@type": "xsd:dateTime",
      "rdfs:comment": "Timestamp when the credential was verified by BPP (ISO 8601)."
    },
    
    "conflictCheck": {
      "@id": "conflictCheck",
      "@type": "@id",
      "rdfs:comment": "Conflict check results object. Returned in on_init response after BPP checks for conflicts with existing enrollments."
    },
    
    "hasConflict": {
      "@id": "hasConflict",
      "@type": "xsd:boolean",
      "rdfs:comment": "Boolean indicating whether a conflict exists with existing enrollments. True if conflict found, false otherwise."
    },
    
    "conflictingEnrollments": {
      "@id": "conflictingEnrollments",
      "@type": "@id",
      "@container": "@set",
      "rdfs:comment": "Array of ConflictingEnrollment objects detailing conflicts found during conflict checking."
    },
    
    "conflictReason": {
      "@id": "conflictReason",
      "@type": "xsd:string",
      "rdfs:comment": "Human-readable description of why the conflict exists. Explains the nature of the conflict."
    },
    
    "conflictType": {
      "@id": "conflictType",
      "@type": "xsd:string",
      "rdfs:comment": "Type of conflict. Values: METER_ALREADY_ENROLLED, DER_ALREADY_ENROLLED, PROGRAM_CONFLICT, etc."
    },
    
    "checkedAt": {
      "@id": "checkedAt",
      "@type": "xsd:dateTime",
      "rdfs:comment": "Timestamp when the conflict check was performed by BPP (ISO 8601)."
    },
    
    "message": {
      "@id": "message",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:description" },
      "rdfs:comment": "Human-readable message. Equivalent to schema:description."
    },
    
    "loggedAt": {
      "@id": "loggedAt",
      "@type": "xsd:dateTime",
      "rdfs:comment": "Timestamp when the enrollment was logged in BPP's audit system (ISO 8601). Returned in on_confirm response."
    },
    
    "logReference": {
      "@id": "logReference",
      "@type": "xsd:string",
      "rdfs:comment": "Reference identifier for the enrollment log entry. Used for audit trail and record keeping."
    },
    
    "credentials": {
      "@id": "credentials",
      "@type": "@id",
      "@container": "@set",
      "rdfs:comment": "Array of VerifiableCredential objects (W3C VC Data Model v2.0) provided in init request. Contains VCs for meter ownership, program eligibility, DER certification, etc."
    },
    
    "existingEnrollments": {
      "@id": "existingEnrollments",
      "@type": "@id",
      "@container": "@set",
      "rdfs:comment": "Array of VerifiableCredential objects (W3C VC Data Model v2.0) representing existing enrollments. Provided in init request to help BPP check for conflicts."
    },
    
    "type": {
      "@id": "vc:type",
      "@type": "xsd:string",
      "rdfs:comment": "Credential type as per W3C VC Data Model v2.0. Must include 'VerifiableCredential' plus specific types: MeterOwnershipCredential, ProgramEligibilityCredential, DERCertificationCredential, ProgramEnrollmentCredential."
    },
    
    "derId": {
      "@id": "derId",
      "@type": "xsd:string",
      "rdfs:comment": "DER identifier associated with a DER certification credential. Links the credential to a specific DER."
    },
    
    "updateType": {
      "@id": "updateType",
      "@type": "xsd:string",
      "rdfs:comment": "Type of update being performed. Values: CONSENT_REVOCATION, UNENROLLMENT."
    },
    
    "consentRevocation": {
      "@id": "consentRevocation",
      "@type": "@id",
      "rdfs:comment": "Consent revocation details object. Contains information about the consent being revoked."
    },
    
    "unenrollment": {
      "@id": "unenrollment",
      "@type": "@id",
      "rdfs:comment": "Unenrollment details object. Contains information about the enrollment being cancelled."
    },
    
    "consentCredentialId": {
      "@id": "consentCredentialId",
      "@type": "xsd:string",
      "rdfs:comment": "Identifier of the consent credential being revoked. References the Verifiable Credential ID."
    },
    
    "consentType": {
      "@id": "consentType",
      "@type": "xsd:string",
      "rdfs:comment": "Type of consent being revoked. Values: DATA_COLLECTION, DER_CONTROL, CROSS_UTILITY_SHARING."
    },
    
    "revokedAt": {
      "@id": "revokedAt",
      "@type": "xsd:dateTime",
      "owl:equivalentProperty": { "@id": "schema:endTime" },
      "rdfs:comment": "When revocation occurred. Equivalent to schema:endTime for actions."
    },
    
    "effectiveDate": {
      "@id": "effectiveDate",
      "@type": "xsd:dateTime",
      "owl:equivalentProperty": { "@id": "schema:scheduledTime" },
      "rdfs:comment": "When revocation takes effect. Equivalent to schema:scheduledTime."
    },
    
    "statusListUrl": {
      "@id": "statusListUrl",
      "@type": "@id",
      "rdfs:comment": "URL of the W3C VC status list where the revoked credential is recorded. Used for verification."
    },
    
    "statusListIndex": {
      "@id": "statusListIndex",
      "@type": "xsd:string",
      "rdfs:comment": "Index in the status list where this credential's revocation status is recorded. Used for efficient status checking."
    },
    
    "cancelledAt": {
      "@id": "cancelledAt",
      "@type": "xsd:dateTime",
      "rdfs:comment": "Timestamp when the enrollment was cancelled (ISO 8601)."
    },
    
    "enrollmentCredentialStatus": {
      "@id": "enrollmentCredentialStatus",
      "@type": "@id",
      "rdfs:comment": "Status information for the enrollment credential after revocation. Contains status list details."
    },
    
    "consentsRevoked": {
      "@id": "consentsRevoked",
      "@type": "@id",
      "@container": "@set",
      "rdfs:comment": "Array of consent credentials that were revoked as part of unenrollment."
    },
    
    "revokeAllConsents": {
      "@id": "revokeAllConsents",
      "@type": "xsd:boolean",
      "rdfs:comment": "Boolean indicating whether all associated consents should be revoked during unenrollment."
    },
    
    "UserAuth": {
      "@id": "UserAuth",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "schema:AuthenticateAction" },
      "rdfs:comment": "User authentication base type. Extends schema:AuthenticateAction."
    },
    
    "UserAuthRequest": {
      "@id": "UserAuthRequest",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "UserAuth" },
      "rdfs:comment": "User authentication request (BAP → BPP). Contains credentials for verification."
    },
    
    "UserAuthResponse": {
      "@id": "UserAuthResponse",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "UserAuth" },
      "rdfs:comment": "User authentication response (BPP → BAP). Contains verification results."
    },
    
    "userAuth": {
      "@id": "userAuth",
      "@type": "@id",
      "owl:equivalentProperty": { "@id": "schema:actionStatus" },
      "rdfs:comment": "Authentication object. UserAuthRequest for requests, UserAuthResponse for responses."
    },
    
    "OtpAuthRequest": {
      "@id": "OtpAuthRequest",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "UserAuthRequest" },
      "rdfs:comment": "OTP authentication request. Contains mobile number and optionally OTP+nguid."
    },
    
    "OtpAuthResponse": {
      "@id": "OtpAuthResponse",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "UserAuthResponse" },
      "rdfs:comment": "OTP authentication response. Contains nguid, verification status, and message."
    },
    
    "OAuth2AuthRequest": {
      "@id": "OAuth2AuthRequest",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "UserAuthRequest" },
      "rdfs:comment": "OAuth2/OIDC authentication request. Contains JWT tokens (accessToken, idToken)."
    },
    
    "OAuth2AuthResponse": {
      "@id": "OAuth2AuthResponse",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "UserAuthResponse" },
      "rdfs:comment": "OAuth2/OIDC authentication response. Contains verification result and extracted claims."
    },
    
    "authMethod": {
      "@id": "authMethod",
      "@type": "xsd:string",
      "rdfs:comment": "Authentication method discriminator. Values: OTP, OAUTH2, OIDC."
    },
    
    "accessToken": {
      "@id": "accessToken",
      "@type": "xsd:string",
      "rdfs:comment": "OAuth2 access token (bearer token) for authentication."
    },
    
    "tokenType": {
      "@id": "tokenType",
      "@type": "xsd:string",
      "rdfs:comment": "Token type, usually 'Bearer' for OAuth2."
    },
    
    "idToken": {
      "@id": "idToken",
      "@type": "xsd:string",
      "rdfs:comment": "OIDC ID token (JWT) containing user identity claims."
    },
    
    "refreshToken": {
      "@id": "refreshToken",
      "@type": "xsd:string",
      "rdfs:comment": "OAuth2 refresh token for obtaining new access tokens."
    },
    
    "scope": {
      "@id": "scope",
      "@type": "xsd:string",
      "rdfs:comment": "OAuth2 scopes granted to the token. Space-separated list."
    },
    
    "issuer": {
      "@id": "issuer",
      "@type": "@id",
      "owl:equivalentProperty": { "@id": "schema:issuedBy" },
      "rdfs:comment": "OIDC issuer URL. Equivalent to schema:issuedBy."
    },
    
    "subject": {
      "@id": "subject",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:identifier" },
      "rdfs:comment": "Subject identifier (user ID) from token. Related to schema:identifier."
    },
    
    "MeterEnrollment": {
      "@id": "MeterEnrollment",
      "@type": "@id",
      "rdfs:subClassOf": { "@id": "schema:IndividualProduct" },
      "rdfs:comment": "A specific product instance for enrollment. Extends schema:IndividualProduct. Represents a device/asset being subscribed (meter, SIM, device, etc.)."
    },
    
    "meterId": {
      "@id": "meterId",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:serialNumber" },
      "rdfs:comment": "Primary device identifier. Equivalent to schema:serialNumber."
    },
    
    "meterNumber": {
      "@id": "meterNumber",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:productID" },
      "rdfs:comment": "Secondary/display identifier. Equivalent to schema:productID."
    },
    
    "utilityId": {
      "@id": "utilityId",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:provider" },
      "rdfs:comment": "Service provider identifier. Related to schema:provider."
    },
    
    "utilityCustomerId": {
      "@id": "utilityCustomerId",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:accountId" },
      "rdfs:comment": "Customer account identifier at the utility. Equivalent to schema:accountId. Links the authenticated user to their billing account."
    },
    
    "connectionType": {
      "@id": "connectionType",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:category" },
      "rdfs:comment": "Service category. Equivalent to schema:category (residential, commercial, etc.)."
    },
    
    "sanctionedLoad": {
      "@id": "sanctionedLoad",
      "@type": "xsd:decimal",
      "rdfs:comment": "Capacity/limit for the connection (kW). Domain-specific; no direct schema.org equivalent."
    },
    
    "mobile": {
      "@id": "mobile",
      "@type": "xsd:string",
      "owl:equivalentProperty": { "@id": "schema:telephone" },
      "rdfs:comment": "Mobile phone number. Equivalent to schema:telephone."
    },
    
    "otp": {
      "@id": "otp",
      "@type": "xsd:string",
      "rdfs:comment": "One-time password entered by user for verification. Sent by BPP via SMS to mobile number."
    },
    
    "nguid": {
      "@id": "nguid",
      "@type": "xsd:string",
      "rdfs:comment": "Network GUID / session token for OTP verification. Generated by BPP, returned in on_init, required in confirm."
    },
    
    "verified": {
      "@id": "verified",
      "@type": "xsd:boolean",
      "rdfs:comment": "Boolean indicating whether OTP verification was successful. Only present in on_confirm response."
    }
  }
}

