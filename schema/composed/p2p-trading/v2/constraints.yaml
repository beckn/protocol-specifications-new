# P2P Trading Domain Constraints
# Domain-specific validation rules enforced for P2P energy trading
# without modifying the core Beckn Protocol specification.

version: "1.0"
domain: "p2p-trading"

# Schema mappings: Maps attribute types to their schema context URLs
# Used to infer schema URLs when @type is found without explicit @context
schemaMapping:
  EnergyBuyer: "EnergyBuyer/v0.2"
  EnergyProvider: "EnergyProvider/v0.2"
  EnergyResource: "EnergyResource/v0.2"
  EnergyTradeOffer: "EnergyTradeOffer/v0.2"
  EnergyTradeDelivery: "EnergyTradeDelivery/v0.2"

constraints:
  # Constraint: Provider objects must have providerAttributes
  - name: "Provider must have providerAttributes"
    description: "Provider objects in P2P trading domain must include providerAttributes with @type='EnergyProvider'"
    target:
      type: "beckn:Provider"
    rules:
      - property: "providerAttributes"
        required: true
        message: "Provider object must have 'providerAttributes' in P2P trading domain"
      - property: "providerAttributes.@type"
        equals: "EnergyProvider"
        message: "Provider.providerAttributes must have @type='EnergyProvider' in P2P trading domain"

  # Constraint: Buyer objects must have buyerAttributes
  - name: "Buyer must have buyerAttributes"
    description: "Buyer objects in P2P trading domain must include buyerAttributes with @type='EnergyBuyer'"
    target:
      type: "beckn:Buyer"
    rules:
      - property: "buyerAttributes"
        required: true
        message: "Buyer object must have 'buyerAttributes' in P2P trading domain"
      - property: "buyerAttributes.@type"
        equals: "EnergyBuyer"
        message: "Buyer.buyerAttributes must have @type='EnergyBuyer' in P2P trading domain"

